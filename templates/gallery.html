{% extends "base.html" %}
{% block content %}

  <section class="gallery-frame">
    <div class="gallery-grid">
      {% for img in gallery.images %}
        <a class="gallery-thumb" href="#{{ gallery.slug }}-{{ loop.index0 }}">
          <img loading="lazy" decoding="async" src="{{ img.thumb_url }}" alt="{{ img.alt }}">
        </a>
      {% endfor %}
    </div>
  </section>

  <header class="header--series">
    <nav class="nav--series"><h2><a href="/" class="nav__link--series"><strong>&lt;</strong></a></h2></nav>
    <div><h1>{{ gallery.title }}</h1></div>
  </header>

  {# --- CSS-only lightbox overlays --- #}
  {% if gallery.images|length %}
    {% set count = gallery.images|length %}
    {% for img in gallery.images %}
      <div class="lightbox"
          id="{{ gallery.slug }}-{{ loop.index0 }}"
          role="dialog">
        <a href="#" class="lightbox__close">&times;</a>
        <img class="lightbox__img" src="{{ img.webp_url }}" alt="{{ img.alt }}">
        {% if img.alt %}
          <div class="lightbox__caption">{{ img.alt }}</div>
        {% endif %}
      </div>
    {% endfor %}
  {% endif %}
{% endblock %}
